<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recommandations d'accessibilitÃ© ðŸŽ®</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #fafafa; }
    h1 { color: #333; }
    .feature-list { margin-top: 20px; }
    .feature { margin: 8px 0; }
    button { margin-top: 20px; padding: 10px 20px; background-color: #0078d4; color: white; border: none; cursor: pointer; border-radius: 6px; }
    button:hover { background-color: #005fa3; }
    #results { margin-top: 30px; background: white; padding: 15px; border-radius: 6px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  </style>
</head>
<body>

  <h1>Recommandations d'accessibilitÃ© ðŸŽ®</h1>
  <p>Choisis les features de gameplay prÃ©sentes dans ton jeu :</p>

  <div id="features" class="feature-list"></div>

  <button id="submit">Obtenir les recommandations</button>

  <div id="results"></div>

  <script>
    const API_BASE = "https://accessibility-recommender.onrender.com"; // ton API Render

    async function loadFeatures() {
      const res = await fetch(`${API_BASE}/gameplay-features`);
      const features = await res.json();
      const container = document.getElementById("features");

      features.forEach(f => {
        const div = document.createElement("div");
        div.className = "feature";
        div.innerHTML = `<label><input type="checkbox" value="${f.id}"> ${f.name}</label>`;
        container.appendChild(div);
      });
    }

    async function getRecommendations(selectedIds) {
      // âš ï¸ Pour le moment, ton API nâ€™a pas encore de vraie route â€œrecommandationsâ€.
      // On simulera le comportement ici en attendant.
      const recommendations = [];
      if (selectedIds.includes(1)) recommendations.push("ðŸ’¬ Ajouter des sous-titres");
      if (selectedIds.includes(2)) recommendations.push("âš™ï¸ Permettre de basculer entre maintien et toggle");
      return recommendations;
    }

    document.getElementById("submit").addEventListener("click", async () => {
      const checked = [...document.querySelectorAll("input[type=checkbox]:checked")];
      const selectedIds = checked.map(c => parseInt(c.value));
      const recs = await getRecommendations(selectedIds);

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "<h3>Recommandations :</h3>" + 
        (recs.length > 0 ? `<ul>${recs.map(r => `<li>${r}</li>`).join("")}</ul>` : "<p>Aucune recommandation spÃ©cifique.</p>");
    });

    loadFeatures();
  </script>

</body>
</html>
